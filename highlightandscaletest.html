<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>DataArray Change</title>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<link type="text/css" href="style.css" rel="stylesheet" charset="utf-8">
	 <link href="https://fonts.googleapis.com/css?family=Rubik" rel="stylesheet">
</head>

<body>
	<nav>
  <ul>
  <li><a href="index.html">Home</a></li>
  <li><a>About</a></li>
  <li><a>Assignment</a>
    <ul>
      <li><a href="assignment3.html">DataArray Change</a></li>
      <li><a href="assignment2.html">Console &amp Function</a></li>
      <li><a href="assignment1.html">SVG Painting</a></li>
    </ul>
  </li>
</ul>
</nav>
	 




	<script>  


		var dataset = [30, 80, 120];

		var dataset2 = [80, 23, 90, 57, 39, 197];

		var width  = 400;	
		var height = 400;	

        var svg = d3.select("body")			
			        .append("svg")			
			        .attr("width", width)	
			        .attr("height", height);

        //outer padding
        var padding = { top: 20 , right: 20, bottom: 20, left: 20 };
        //rect's width + space
        var rectStep = 35;	
        //rect's width
        var rectWidth = 30;


            function draw(){

	
	        var updateRect = svg.selectAll("rect")
	                            .data(dataset);
	
	
	        var enterRect = updateRect.enter();
	
	
	        var exitRect = updateRect.exit();
	
	        //Enter Rect
	            updateRect.attr("fill","#e60000")
	                      .on("mouseover",function(d,i){
			            d3.select(this)
				          .attr("fill","yellow");
		        })
		                  .on("mouseout",function(d,i){
			            d3.select(this)
				          .transition()
		                  .duration(500)
				          .attr("fill","#e60000");
		})			
			              .attr("x", function(d,i){	
				return padding.left + i * rectStep;
			})
			              .attr("y", function(d){
				return height - padding.bottom - d;
			})
			              .attr("width",rectWidth)		//set up rect's width
			              .attr("height",function(d){	//set up rect's height
				return d;
			});

	            //Update rects
	            enterRect.append("rect")
			             .attr("fill","#e60000")
			             .on("mouseover",function(d,i){
			           d3.select(this)
				.attr("fill","yellow");
		     })
		        .on("mouseout",function(d,i){
			  d3.select(this)
				.transition()
		        .duration(500)
				.attr("fill","#e60000");
		})				
			    .attr("x", function(d,i){		
				return padding.left + i * rectStep;
			})
			    .attr("y", function(d){		
				return height- padding.bottom - d;
			})
			             .attr("width",rectWidth)		
			             .attr("height",function(d){	
				return d;
			});

	            //Exit
	            exitRect.remove();

	
	            //Update text(number)
	            var updateText = svg.selectAll("text")
	                                .data(dataset);
	
	            //Enter text(number)
	            var enterText = updateText.enter();
	
	            //Exit text(number)
	            var exitText = updateText.exit();
	
	            //1.text's attr
	            updateText.attr("fill","white")
	                      .attr("font-size","14px")
	                      .attr("text-anchor","middle")
	                      .attr("x", function(d,i){
		                  return padding.left + i * rectStep;
	                      })
	                      .attr("y", function(d){
		                  return height- padding.bottom - d;
	                      })
	                      .attr("dx",rectWidth/2)
	                      .attr("dy","1em")
	                      .text(function(d){
		                   return d;
	                        });
	
	             //2. 
	             enterText.append("text")
	                      .attr("fill","white")
	                      .attr("font-size","14px")
	                      .attr("text-anchor","middle")
	                      .attr("x", function(d,i){
		                        return padding.left + i * rectStep;
	                            })
	                      .attr("y", function(d){
		                        return height- padding.bottom - d;
	                            })
	                      .attr("dx",rectWidth/2)
	                      .attr("dy","1em")
	                      .text(function(d){
		                        return d;
	                       });
	
	             //3. 
	             exitText.remove();
                 }

                 draw();



                function sort(){
	                     dataset.sort(d3.ascending);
	                     draw();
                         }


                function add(){
	            dataset.push( Math.floor(Math.random() * 350) );
	                     draw();
                         }




















                //The third function
                function change(){
                	

	
	        var updateRect = svg.selectAll("rect")
	                            .data(dataset2);
	
	
	        var enterRect = updateRect.enter();
	
	
	        var exitRect = updateRect.exit();
	
	        //Enter Rect
	            updateRect.attr("fill","#e60000")
	                      .on("mouseover",function(d,i){
			            d3.select(this)
				          .attr("fill","yellow");
		})
		                  .on("mouseout",function(d,i){
			            d3.select(this)
				          .transition()
		                  .duration(500)
				          .attr("fill","#e60000");
		})			
			              .attr("x", function(d,i){	
				return padding.left + i * rectStep;
			})
			              .attr("y", function(d){
				return height - padding.bottom - d;
			})
			              .attr("width",rectWidth)		//set up rect's width
			              .attr("height",function(d){	//set up rect's height
				return d;


			});
			              

	            //Update rects
	            enterRect.append("rect")
			             .attr("fill","#e60000")
			             .on("mouseover",function(d,i){
			           d3.select(this)
				         .attr("fill","yellow");
		})
		                 .on("mouseout",function(d,i){
			           d3.select(this)
				         .transition()
		                 .duration(500)
				         .attr("fill","#e60000");
		})		
			             .attr("x", function(d,i){		
				return padding.left + i * rectStep;
			})
			             .attr("y", function(d){		
				return height- padding.bottom - d;
			})
			             .attr("width",rectWidth)		
			             .attr("height",function(d){	
				return d;
			});


	            //Exit
	            exitRect.remove();

	
	            //Update text(number)
	            var updateText = svg.selectAll("text")
	                                .data(dataset2);
	
	            //Enter text(number)
	            var enterText = updateText.enter();
	
	            //Exit text(number)
	            var exitText = updateText.exit();
	
	            //1.text's attr
	            updateText.attr("fill","white")
	                      .attr("font-size","14px")
	                      .attr("text-anchor","middle")
	                      .attr("x", function(d,i){
		                  return padding.left + i * rectStep;
	                      })
	                      .attr("y", function(d){
		                  return height- padding.bottom - d;
	                      })
	                      .attr("dx",rectWidth/2)
	                      .attr("dy","1em")
	                      .text(function(d){
		                   return d;
	                        });
	
	             //2. 
	             enterText.append("text")
	                      .attr("fill","white")
	                      .attr("font-size","14px")
	                      .attr("text-anchor","middle")
	                      .attr("x", function(d,i){
		                        return padding.left + i * rectStep;
	                            })
	                      .attr("y", function(d){
		                        return height- padding.bottom - d;
	                            })
	                      .attr("dx",rectWidth/2)
	                      .attr("dy","1em")
	                      .text(function(d){
		                        return d;
	                       });
	
	             //3. 
	             exitText.remove();
                 }







                //new dataarray loop
            var updateRect = svg.selectAll("rect")
	                            .data(dataset);
	
	
	        var enterRect = updateRect.enter();
	
	
	        var exitRect = updateRect.exit();
	
	        //Enter Rect
	            updateRect.attr("fill","#e60000")
	                      .on("mouseover",function(d,i){
			            d3.select(this)
				          .attr("fill","yellow");
		})
		                  .on("mouseout",function(d,i){
			            d3.select(this)
				          .transition()
		                  .duration(500)
				          .attr("fill","#e60000");
		})			
			              .attr("x", function(d,i){	
				return padding.left + i * rectStep;
			})
			              .attr("y", function(d){
				return height - padding.bottom - d;
			})
			              .attr("width",rectWidth)		//set up rect's width
			              .attr("height",function(d){	//set up rect's height
				return d;
			});

	            //Update rects
	            enterRect.append("rect")
			             .attr("fill","#e60000")
			             .on("mouseover",function(d,i){
			           d3.select(this)
				         .attr("fill","yellow");
		})
		                 .on("mouseout",function(d,i){
			           d3.select(this)
				         .transition()
		                 .duration(500)
				         .attr("fill","#e60000");
		})		
			             .attr("x", function(d,i){		
				return padding.left + i * rectStep;
			})
			             .attr("y", function(d){		
				return height- padding.bottom - d;
			})
			             .attr("width",rectWidth)		
			             .attr("height",function(d){	
				return d;
			});

			             

	            //Exit
	            exitRect.remove();
             

    </script> 
    <br />
        <div class="btn">
        <button type="button" onclick="sort()">   Sort  </button>
        <button type="button" onclick="add()">   Add Values  </button>
        <button type="button" onclick="change()">  New DataArray  </button> 
        </div>

</body>
</html>


