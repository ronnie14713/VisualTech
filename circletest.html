<!doctype html>
<html>
<head>
    
    <script src="https://d3js.org/d3.v4.min.js"></script>
</head>
<body>

    <script>
        //set up data
        var dataset1 = [30, 50, 70, 90];
        var dataset2 = [30, 40, 60];
        

        //basic parameters
        var dataIndex = 1;
        var space = 30;
        var x0 = 40;
        var y0 = 150;
        var fulllength = 400;

       
        //build a svgcontainer
        var svgcontainer = d3.select("body")
                    .append("svg")
                    .attr("width",600)
                    .attr("height",600);

            
            
            //draw circles
            svgcontainer.append("g")
                        .selectAll("circle")
                        .data(eval("dataset" + dataIndex))
                        .enter()
                        .append("circle")
                        .attr("cx", x0 + 230)
                        .attr("cy", function(d,i){
                            return y0 + i * space * 2;
                        })
                        .attr("r", function(d){
                            return d;
                        })
                        .style("stroke-width", 0.5)
                        .style("stroke", "black")
                        .style("stroke-opacity", .5)
                        .style("fill", function(d){
                            if (d < 40) {
                                return "#cc0000";
                            }

                            else {

                                return "#ffffff";

                            }
                        });

            
            //Set up button
            d3.select("body")
              .append("button")
              .text("Change Dataset")
              .on("click", function(){
                if (dataIndex == 1){
                    dataIndex = 2;
                } else {
                    dataIndex = 1;
                }
                

                //Refresh dataset
                var circle = svgcontainer.select("g").selectAll("circle").data(eval("dataset" + dataIndex));



                circle.exit()
                      .remove();

                circle.enter()
                      .append("circle")
                      .attr("r", 0);

            


              circle.transition()
                    .duration(1000)
                    .attr("cx", x0 + 230)
                    .attr("cy", function(d,i){
                            return y0 + i * space * 2;
                        })
                    .attr("r", function(d){
                            return d;
                        })


                    });
                    



    </script>
</body>
</html>